---
# Hook-Driven Test Framework - Test Definitions
# Generated by auto-harness plugin for sdlc-quality
#
# Test Format:
#   id: Unique identifier (category_component_action)
#   description: Human-readable description
#   category: Grouping (commands, agents, skills)
#   action: What Claude should do
#   expect: Validation rules
#     - contains: Text that must appear
#     - not_contains: Text that must NOT appear
#     - regex: Pattern to match
#   capture: Optional variable capture
#   depends_on: Optional dependency on another test
#   tags: Categorization tags

# ===========================================================================
# COMMAND TESTS
# ===========================================================================

- id: cmd_setup_help
  description: Verify sdlc-setup command is available and shows help
  category: commands
  action: "Ask: 'What does the /sdlc-setup command do?'"
  expect:
    - contains: "SDLC"
    - contains: "setup"
    - not_contains: "not found"
    - not_contains: "unknown command"
  tags: [smoke, commands, setup]

- id: cmd_setup_detection
  description: Verify sdlc-setup detects project characteristics
  category: commands
  action: >-
    Run the /sdlc-setup command in dry-run mode to see what it would
    configure
  expect:
    - contains: "detect"
    - not_contains: "error"
  tags: [smoke, commands, setup]

- id: cmd_validate_help
  description: Verify sdlc-validate command is available and shows help
  category: commands
  action: "Ask: 'What does the /sdlc-validate command do?'"
  expect:
    - contains: "SDLC"
    - contains: "compliance"
    - not_contains: "not found"
    - not_contains: "unknown command"
  tags: [smoke, commands, validate]

- id: cmd_validate_check
  description: Verify sdlc-validate can run compliance checks
  category: commands
  action: "Run the /sdlc-validate command to check SDLC compliance"
  expect:
    - contains: "compliance"
    - not_contains: "command not found"
  tags: [smoke, commands, validate]

# ===========================================================================
# AGENT TESTS
# ===========================================================================

- id: agent_ci_architect_basic
  description: Verify ci-architect agent is available and responds
  category: agents
  action: >-
    Use the ci-architect agent to analyze the current project's CI
    configuration
  expect:
    - contains: "CI"
    - not_contains: "agent not found"
    - not_contains: "unknown agent"
  tags: [smoke, agents, ci]

- id: agent_ci_architect_workflow
  description: Verify ci-architect can suggest workflow improvements
  category: agents
  action: >-
    Ask the ci-architect agent: 'What GitHub Actions workflows would you
    recommend for this project?'
  expect:
    - contains: "workflow"
    - not_contains: "error"
  tags: [regression, agents, ci]

- id: agent_compliance_auditor_basic
  description: Verify compliance-auditor agent is available and responds
  category: agents
  action: >-
    Use the compliance-auditor agent to audit this project's SDLC compliance
  expect:
    - contains: "compliance"
    - not_contains: "agent not found"
    - not_contains: "unknown agent"
  tags: [smoke, agents, compliance]

- id: agent_compliance_auditor_check
  description: Verify compliance-auditor provides structured assessment
  category: agents
  action: >-
    Ask the compliance-auditor agent to provide a compliance summary for
    this project
  expect:
    - regex: "(pass|fail|compliant|non-compliant|requirement)"
    - not_contains: "error"
  tags: [regression, agents, compliance]

- id: agent_security_reviewer_basic
  description: Verify security-reviewer agent is available and responds
  category: agents
  action: >-
    Use the security-reviewer agent to review security practices in this
    project
  expect:
    - contains: "security"
    - not_contains: "agent not found"
    - not_contains: "unknown agent"
  tags: [smoke, agents, security]

- id: agent_security_reviewer_scan
  description: Verify security-reviewer can identify security concerns
  category: agents
  action: >-
    Ask the security-reviewer agent: 'What security vulnerabilities should
    I check for in this codebase?'
  expect:
    - regex: "(vulnerabilit|security|OWASP|injection|XSS)"
    - not_contains: "error"
  tags: [regression, agents, security]

- id: agent_quality_enforcer_basic
  description: Verify quality-enforcer agent is available and responds
  category: agents
  action: "Use the quality-enforcer agent to check code quality standards"
  expect:
    - contains: "quality"
    - not_contains: "agent not found"
    - not_contains: "unknown agent"
  tags: [smoke, agents, quality]

- id: agent_quality_enforcer_lint
  description: Verify quality-enforcer provides linting guidance
  category: agents
  action: >-
    Ask the quality-enforcer agent: 'What linting and formatting rules
    should this project follow?'
  expect:
    - regex: "(lint|format|style|eslint|prettier|standard)"
    - not_contains: "error"
  tags: [regression, agents, quality]

# ===========================================================================
# SKILL TESTS
# ===========================================================================

- id: skill_setup_trigger
  description: Verify setup skill triggers on appropriate prompts
  category: skills
  action: "Ask: 'How do I set up SDLC compliance in this project?'"
  expect:
    - contains: "SDLC"
    - not_contains: "skill not found"
  tags: [smoke, skills, setup]

- id: skill_validate_trigger
  description: Verify validate skill triggers on compliance questions
  category: skills
  action: "Ask: 'Can you validate this project meets SDLC requirements?'"
  expect:
    - contains: "compliance"
    - not_contains: "skill not found"
  tags: [smoke, skills, validate]

- id: skill_quality_trigger
  description: Verify quality skill triggers on code quality questions
  category: skills
  action: "Ask: 'Check the code quality standards in this project'"
  expect:
    - regex: "(quality|lint|format|standard)"
    - not_contains: "skill not found"
  tags: [smoke, skills, quality]

- id: skill_ci_trigger
  description: Verify CI skill triggers on CI/CD questions
  category: skills
  action: "Ask: 'Help me configure CI/CD for this project'"
  expect:
    - regex: "(CI|CD|pipeline|workflow|GitHub Actions)"
    - not_contains: "skill not found"
  tags: [smoke, skills, ci]

- id: skill_security_trigger
  description: Verify security skill triggers on security questions
  category: skills
  action: "Ask: 'Review the security practices in this codebase'"
  expect:
    - contains: "security"
    - not_contains: "skill not found"
  tags: [smoke, skills, security]

- id: skill_testing_trigger
  description: Verify testing skill triggers on test-related questions
  category: skills
  action: "Ask: 'What testing standards should this project follow?'"
  expect:
    - regex: "(test|coverage|unit|integration)"
    - not_contains: "skill not found"
  tags: [smoke, skills, testing]

- id: skill_docs_trigger
  description: Verify docs skill triggers on documentation questions
  category: skills
  action: "Ask: 'What documentation does this project need?'"
  expect:
    - regex: "(document|README|docs|changelog)"
    - not_contains: "skill not found"
  tags: [smoke, skills, docs]

- id: skill_build_trigger
  description: Verify build skill triggers on build system questions
  category: skills
  action: "Ask: 'Help me configure the build system for this project'"
  expect:
    - regex: "(build|compile|package|bundle)"
    - not_contains: "skill not found"
  tags: [smoke, skills, build]

- id: skill_release_trigger
  description: Verify release skill triggers on release questions
  category: skills
  action: "Ask: 'How should I handle releases for this project?'"
  expect:
    - regex: "(release|version|changelog|tag)"
    - not_contains: "skill not found"
  tags: [smoke, skills, release]

- id: skill_vcs_trigger
  description: Verify VCS skill triggers on version control questions
  category: skills
  action: "Ask: 'What version control practices should this project follow?'"
  expect:
    - regex: "(git|branch|commit|VCS|version control)"
    - not_contains: "skill not found"
  tags: [smoke, skills, vcs]

- id: skill_observability_trigger
  description: Verify observability skill triggers on monitoring questions
  category: skills
  action: "Ask: 'How should I set up monitoring and observability?'"
  expect:
    - regex: "(monitor|observ|log|metric|trace)"
    - not_contains: "skill not found"
  tags: [smoke, skills, observability]

- id: skill_ai_trigger
  description: Verify AI skill triggers on AI-related questions
  category: skills
  action: "Ask: 'What AI coding assistant guidelines should this project have?'"
  expect:
    - regex: "(AI|assistant|Claude|copilot)"
    - not_contains: "skill not found"
  tags: [smoke, skills, ai]
